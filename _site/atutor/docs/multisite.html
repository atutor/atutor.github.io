<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>ATutor Multisite Setup</title>
<meta property="og:title" content="atutor.github.io" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ATutor is an Open Source Web-based Learning Management System (LMS) used to develop and deliver online courses. Administrators can install or update ATutor in minutes, develop custom themes to give ATutor a new look, and easily extend its functionality with feature modules. Educators can quickly assemble, package, and redistribute standardized Web-based instructional content, easily import prepackaged content, and conduct their courses online. Students learn in an accessible, adaptive, social learning environment." />
<meta property="og:description" content="ATutor is an Open Source Web-based Learning Management System (LMS) used to develop and deliver online courses. Administrators can install or update ATutor in minutes, develop custom themes to give ATutor a new look, and easily extend its functionality with feature modules. Educators can quickly assemble, package, and redistribute standardized Web-based instructional content, easily import prepackaged content, and conduct their courses online. Students learn in an accessible, adaptive, social learning environment." />
<link rel="canonical" href="https://atutor.github.io/" />
<meta property="og:url" content="https://atutor.github.io/" />
<meta property="og:site_name" content="atutor.github.io" />
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="/js/jquery.toc.js"></script>

<script type="application/ld+json">
{"name":"atutor.github.io","description":"ATutor is an Open Source Web-based Learning Management System (LMS) used to develop and deliver online courses. Administrators can install or update ATutor in minutes, develop custom themes to give ATutor a new look, and easily extend its functionality with feature modules. Educators can quickly assemble, package, and redistribute standardized Web-based instructional content, easily import prepackaged content, and conduct their courses online. Students learn in an accessible, adaptive, social learning environment.","author":null,"@type":"WebSite","url":"https://atutor.github.io/","image":null,"publisher":null,"headline":"atutor.github.io","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=d21f7591e4074c34581bb4e6987280a5a8e29a48">
    <link rel="stylesheet" href="/js/demo.css">
  </head>
  <body>
    <section class="page-header1">

    </section>
    <section class="main-content">
   	<a id="content" title="content area"></a>
	<div class="cd-fixed-bg cd-bg-1">
	<div class="tpbg">
		    <h1><em>AT</em>utor</h1>
	    <h2>Learning Management System</h2>
	    <br />
	    </div>
	</div>
	<div class="cd-scrolling-bg cd-color-2">
        <div class="clbg" style=""> 
        
        <div class="sidemenu1">
        <!-- Belongs at: /_includes/navigation.html -->
<nav>
<h3><a href="/">Home</a></h3>
    
    <ul>
    <li><h3>ATutor LMS</h3>
  
        
        
          <li class=""><a href="/atutor/index.html">ATutor Details</a></li>
        
        
          <li class=""><a href="/atutor/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="/atutor/features.html">Features</a></li>
        
        
          <li class=""><a href="/atutor/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="/atutor/modules.html">Modules</a></li>
        
        
          <li class=""><a href="/atutor/themes.html">Themes</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/index.html">Translation</a></li>
        
        
          <li class=""><a href="/atutor/repositories.html">Code Repositories</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/atutor/archive/exported_forum1.html">Support Forum Archive</a></li>
        
      </ul>
  
    <ul>
    <li><h3>AContent LCMS</h3>
  
        
        
          <li class=""><a href="/acontent/index.html">AContent Details</a></li>
        
        
          <li class=""><a href="/acontent/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="/acontent/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="/acontent/languages.html">Translation</a></li>
        
      </ul>
  
    <ul>
    <li><h3>Developers</h3>
  
        
        
          <li class=""><a href="/developer/guidelines.html">Developer Docs</a></li>
        
        
          <li class=""><a href="/developer/modules.html">Module Developer</a></li>
        
        
          <li class=""><a href="/developer/languages.html">Translation</a></li>
        
        
          <li class=""><a href="https://github.com/atutor/ATutor/issues">Report Issues</a></li>
        
      </ul>
  
</nav>
        <hr>
        <script>
          (function() {
            var cx = '003504471195032332048:igzbiihmmcg';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        <div class="gsearch"><gcse:searchbox-only></gcse:searchbox-only>
                </div>
        <div id="google_adstop">
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <!-- githubfoot -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2250446123648311"
                 data-ad-slot="4063107943"
                 data-ad-format="auto"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        </div>
        <div class="contentstart">
        <ol class="breadcrumbs">
            <li><a href="/">Home</a></li>
            
            
            
            
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                    
                        <li >
                            
                            <a href="/atutor/">ATutor LMS</a>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                    
                        <li >
                            
                            <a href="/atutor/docs/">Documentation</a>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
        </ol>
        <div class="cd-container">
<h2>ATutor Multisite Setup</h2>
<pre>
######
## ATutor multisite README 1.1:
######

This module is available at:
https://atutor.ca/atutor/modules/index.php

Installation instruction are found at:
http://help.atutor.ca/admin/modules.php


***See further below for instructions on upgrading this module***

***See further below for instructions on upgrading subsites***

#####
# Install and configure Manage Multsite module
#####

After installing the Manage Subsites module, follow the directions below to setup your server to allow subsites. In most
 cases a root users will need to do this, modifying the Web server's configuration to define a location for the ATutor main
  site, and to define a ServerAlias.



1. Ensure your webserver has a virtual host setup to point to the main ATutor codebase. Something like the following with
 Apache. This is typically done by creating a new virtual host file within the Apache sites-available directory, linking the
  file into the sites-enabled directory, then restarting the Web server
  

<VirtualHost *:80>
        ServerName  multi.mysite.com
        ServerAlias *.mysite.com

        # Indexes + Directory Root.
        DirectoryIndex index.php index.html
        DocumentRoot /var/www/sites/multi.mysite.com

        # Logfiles
        ErrorLog  /var/www/sites/logs/multi.mysite.com/errlog.log
        CustomLog /var/www/sites/logs/multi.mysite.com/acclog.log   Combined
</VirtualHost>


2. Once the Manage Subsites module is installed and enabled, change the ownership or permission of the shell script:
 [ATutor_root]mods/manage_multi/exec/make_multi.sh
to ensure it has write permission to the parent directory of [ATutor_root]. This user is typically the same user that owns 
ATutor itself. If you installed the module using the ATutor Module Manager from the public module repository, the system's
 root user will need to make this permission change. If you uploaded the module manually and unpacked it on the server, then
  it is probably already owned by the same users that owns ATutor.


3. To accommodate custom themes for subsites, create a symbolic link from the root sites/ directory in which all subsites and
 the main site are located, to a directory within the main ATutor site. From within the main site's directory, use something
  like:

'ln -s /var/www/sites sites'

4. Go to the main site administrator's "Manage Subsites" page, then choose "Initial Configuration" and follow the
 instructions on the page to configure the database and mysql account that is used to create and manage subsites.

5. To create subsites, use "Manage Subsites" page -> "Create Subsite" page. The details displayed after creating a subsite
 will also be sent to the owner of the email address used during the creation.

6. To manage subsites, use "Manage Subsites" page -> "Manage Subsite" page

###############

######
# Upgrading from V1.0 to v1.1 of the Manage Subsites module
######

The structure for the ATutor_manage_multisite table has changed in this version, and will need to be manually update to add
 these changes. Below are the Alter statements that will need to be run to update the table. Note that the TABLE PREFIX is
  not included in these statements, so be sure to add them in if your table uses them.
  

# Alter in v1.1
ALTER TABLE `subsites` ADD `version` DOUBLE NOT NULL AFTER `site_url` 
ALTER TABLE `subsites` ADD `created_date` DATETIME NOT NULL AFTER `version` 
ALTER TABLE `subsites` ADD `updated_date` DATETIME NOT NULL AFTER `created_date` 
ALTER TABLE `subsites` CHANGE `version` `version` VARCHAR( 25 ) NOT NULL 

# Example with table_prefix

ALTER TABLE `AT_subsites` ADD `version` DOUBLE NOT NULL AFTER `site_url` 

Also note that table privileges for subsite user created with v1.0 of the module will have their privileges automatically
 changed to ALL PRIVILEGES for the database associated with their subsite. If you have concerns about giving your subsite
  administrators this much power, privileges can be set to something less encompassing, so they are not able to accidentally
   drop tables for instance, and potentially damage their subsite's database.
   

In manage_multi/classes/Subsite.class.php, you can comment out the "ALL PRIVILEGES" statement, and uncomment the one above.
 See the line at about #296 and line #686

# For example:

$privileges = "SELECT , INSERT , UPDATE , DELETE , CREATE , ALTER ";
//$privileges = "ALL PRIVILEGES";

##############

######
# Upgrading Subsites
######

Before upgrading subsites you must first upgrade the main ATutor site. This is done the same way you would upgrade any
 standalone ATutor site. See the ATutor Installation and Upgrade instructions for those details:

ATutor Installation and Upgrade
https://atutor.ca/atutor/docs/installation.php#upgrade

After the main site has been upgrades the Manage Subsite module will need to be upgraded as well. Find a copy of the v.1.1
 version of the module at:

ATutor Modules
https://atutor.ca/atutor/modules/index.php

1. When you have downloaded the module, upload it into the ATutor main site's mods/ directory.
2. Move the old module out of the way by renaming it, something like "manage_multi_old"
3. Unzip the new module to create a new manage_multi directory with the new module code
4. Follow the instructions above for upgrading the Manage Subsites module

Once the main ATutor installation has been upgraded, and the Manage Subsites module has been upgraded, the database changes
 needed for the subsite upgrades will need to be done under the Manage Subsites module's "Upgrade Subsites" tab. You may
  choose to upgrade all sites at once, or upgrade them one-by-one or in batches of sites.
   

Though there's unlikely to be any problems updating the databases for subsites, it is always a good idea to create backups o
f the subsite databases before proceeding with the upgrades. Details of the database changes can be found in the
 include/install/db/ directory of the main ATutor installation, reviewing the atutor_upgrade_x.x_to_x.x.sql files for each of 
 the incremental versions being upgraded.
 

##############

For additional installation details see:
http://www.atutor.ca/atutor/docs/installation.php

Or, the official ATutor Handbook:
http://help.atutor.ca


Enjoy!


The ATutor Development Team
http://www.atutor.ca
</pre>
</div>
 <!-- // end of #centerbar-->



<div class="toc_container"></div>
        </div>
         </div>
     </div>
          <footer class="site-footer">
              <div class="cd-color-4">
		<div class="cd-container">
            <div id="google_ads">
		 <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<!-- githubfoot -->
		<ins class="adsbygoogle"
     		style="display:block"
     		data-ad-client="ca-pub-2250446123648311"
     		data-ad-slot="4063107943"
     		data-ad-format="auto"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>
            </div>
		</div> 
	</div>
      </footer>
    </section>
    <script type="text/javascript">
    $( document ).ready(function() {
        $("#article_with_toc").toc();
    });
</script>
  </body>
</html>
